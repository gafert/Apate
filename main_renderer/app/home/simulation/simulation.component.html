<div class="main-tab-header">
  <div style="display: flex; align-items: center">
    <div style="margin-left: 1em; margin-right: 1em">Elf Path</div>
    <app-setting [settingDefault]="'Enter Manually'" settingKey="elfPath" [(setting)]="simulationElfPath"></app-setting>
  </div>

  <app-action-button style="margin-left: 1em" (activate)="initiateSimulation()" text="Initiate"></app-action-button>
  <app-action-button style="margin-left: 1em" (activate)="stepSimulation()"
                     [disabled]="!simLibInterfaceService.elfIsLoaded"
                     text="Step"></app-action-button>

  <app-action-button style="margin-left: 1em" (activate)="runSimulation()"
                     [disabled]="!simLibInterfaceService.elfIsLoaded"
                     text="Run"></app-action-button>

  <app-selecto-option [(options)]="stepOptions"></app-selecto-option>

  <div style="display: flex; align-items: center">
    <div style="margin-left: 1em; margin-right: 1em">Program Counter</div>
    <div>{{simLibInterfaceService.bindings.pc  | async}}</div>
  </div>

  <div style="display: flex; align-items: center">
    <div style="margin-left: 1em; margin-right: 1em">CPU State</div>
    <div>{{cpuStateToString(simLibInterfaceService.bindings.nextCpuState  | async)}}</div>
  </div>
</div>

<div class="main-tab-container" id="simulation-container">
  <!-- Before all other elements because it is below them -->
  <app-graph [focus]="selectedTab" style="width: 100%; height: 100%; position: absolute"></app-graph>

  <div class="tabs simulation-tabs">
    <!-- The paths need to overwrite the last path element e.g. /home/simulation/overview -> /home/simulation/decoder -->
    <button *ngVar="'overview' as s" (click)="selectedTab = s" [attr.selected]="selectedTab === s">Overview</button>
    <button *ngVar="'decoder' as s" (click)="selectedTab = s" [attr.selected]="selectedTab === s">Decoder</button>
    <button *ngVar="'alu' as s" (click)="selectedTab = s" [attr.selected]="selectedTab === s">ALU</button>
    <button *ngVar="'memory' as s" (click)="selectedTab = s" [attr.selected]="selectedTab === s">Memory</button>
    <button *ngVar="'registers' as s" (click)="selectedTab = s" [attr.selected]="selectedTab === s">Registers</button>
  </div>

  <app-instructions #instructionsComponent
                    [programCounter]="simLibInterfaceService.bindings.pc | async"
                    [parsedElf]="simLibInterfaceService.parsedElf"
                    class="simulation-item-content app-instruction"></app-instructions>
  <app-registers
    class="simulation-item-content app-registers"
    [registers]="simLibInterfaceService.bindings.cpuregs | async"></app-registers>

  <app-terminal class="simulation-item-content app-terminal"></app-terminal>
  <app-memory class="simulation-item-content app-memory"></app-memory>
  <app-signals class="simulation-item-content app-signals"></app-signals>
</div>
